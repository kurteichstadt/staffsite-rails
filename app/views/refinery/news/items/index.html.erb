<div id="welcome">
  Stories<span class="smaller">&nbsp;</span>
</div>
<div id="page_interior">
  <% content_for :body do %>
    <%=raw @page.content_for(Refinery::Pages.default_parts.first.to_sym) unless params[:page] %>

    <% if @items.any? %>
      <% @items.each do |item| %>
        <article class="news_item_truncated">
        <h2><%= link_to item.title, refinery.news_item_path(item) %></h2>
        <p class="news_date"><%= t('.published') %> <%= l(item.publish_date, :format => :long) %></p>
        <% if item.source.present? %>
          <p>
          <small>by <%= item.source %></small>
          </p>
        <% end %>
        <div class="big_image">
          <% if item.image %>
            <%= link_to(image_tag(item.image.image.thumb('600x').url), refinery.news_item_path(item))  %>
          <% else %>
            <video id="<%= dom_id(item) %>_video" class="video-js vjs-default-skin" controls
            preload="auto" width="600" height="436" poster="<%= item.video_poster_frame %>"
            data-setup="{}">
            <source src="<%= item.video_url %>" type='video/mp4'>
            </video>
          <% end %>
        </div>
        <div class="article_content">
          <%= truncate  Sanitize.clean(item.body), :length => 500,
            :omission => " ... #{link_to t('.read_more'), refinery.news_item_path(item)}",
          :preserve_html_tags => true %>
      </div>
      </article>
    <% end %>

    <%= will_paginate @items %>
  <% else %>
    <p><em><%= t('.no_items_yet') %></em></p>
  <% end %>
<% end -%>

<% content_for :body_content_right_prepend do -%>
  <%= raw @page.content_for(::Refinery::Pages.default_parts.second.to_sym) %>
  <% end if ::Refinery::Pages.default_parts.many? -%>
  <%= render :partial => '/refinery/news/shared/body_content_right' %>

  <%= render :partial => "/refinery/content_page" %>
</div>
